{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class UserService {\n  constructor(http, route) {\n    this.http = http;\n    this.route = route;\n    this.email = 'joshhiabhishek@gmail.com';\n    this.isUserSignUp = new BehaviorSubject(false);\n    this.isUserLoggedIn = new EventEmitter(false);\n    this.userData = '';\n  }\n  userSignUp(data) {\n    this.http.post('http://localhost:3000/users', data).subscribe(result => {\n      if (result) {\n        this.isUserSignUp.next(true);\n        this.route.navigate(['']);\n        localStorage.setItem('customer', JSON.stringify(result));\n      } else {\n        alert('user not signUp');\n      }\n    });\n  }\n  userLogin(data) {\n    this.http.get(`http://localhost:3000/users?email=${data.loginEmail}&newPassword=${data.loginPassword}`, {\n      observe: 'response'\n    }).subscribe(result => {\n      if (result && result.body && result.body.length) {\n        console.log('Data Fetched');\n        console.log(result);\n        this.userData = result.body[0];\n        console.log(this.userData);\n        console.log(this.userData.role);\n        console.log(this.userData.firstName + this.userData.lastName);\n        if (this.userData.role === 'customer') {\n          console.log(typeof result.body);\n          this.route.navigate(['cartListing']);\n          localStorage.setItem('customer', result.body[0]);\n        } else {\n          this.route.navigate(['admin/adminHome']);\n          localStorage.setItem('admin', JSON.stringify(result.body));\n        }\n        this.isUserSignUp.next(true);\n      } else {\n        console.log('Unable to Fetch Data');\n        this.isUserLoggedIn.emit(true);\n      }\n    });\n    // console.log(data.loginPassword);\n    // console.log(data);\n  }\n  static #_ = this.ɵfac = function UserService_Factory(t) {\n    return new (t || UserService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UserService,\n    factory: UserService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["EventEmitter","BehaviorSubject","UserService","constructor","http","route","email","isUserSignUp","isUserLoggedIn","userData","userSignUp","data","post","subscribe","result","next","navigate","localStorage","setItem","JSON","stringify","alert","userLogin","get","loginEmail","loginPassword","observe","body","length","console","log","role","firstName","lastName","emit","_","i0","ɵɵinject","i1","HttpClient","i2","Router","_2","factory","ɵfac","providedIn"],"sources":["E:\\Angular\\SRH SBGI\\SRH\\src\\app\\services\\user.service.ts"],"sourcesContent":["import { EventEmitter, Injectable } from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http'\r\nimport { login } from '../dataTypes';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  email = 'joshhiabhishek@gmail.com';\r\n\r\n  isUserSignUp = new BehaviorSubject<boolean>(false);\r\n\r\n  isUserLoggedIn = new EventEmitter<boolean>(false);\r\n\r\n  constructor(private http:HttpClient, private route:Router) { }\r\n\r\n  userSignUp(data:any){\r\n    this.http.post('http://localhost:3000/users',data).subscribe((result:any)=>{\r\n      if(result){\r\n        this.isUserSignUp.next(true);\r\n        this.route.navigate(['']);\r\n        localStorage.setItem('customer',JSON.stringify(result));\r\n      }else{\r\n       alert('user not signUp'); \r\n      }\r\n      \r\n    })\r\n  }\r\n\r\n    userData:any='';\r\n\r\n  userLogin(data:any){\r\n    this.http.get(`http://localhost:3000/users?email=${data.loginEmail}&newPassword=${data.loginPassword}`,{observe:'response'}).subscribe((result:any)=>{\r\n        if(result && result.body && result.body.length){\r\n          console.log('Data Fetched');\r\n          console.log(result);\r\n\r\n          this.userData=result.body[0];\r\n          console.log(this.userData);\r\n          console.log(this.userData.role);\r\n          console.log(this.userData.firstName + this.userData.lastName);\r\n          \r\n          if(this.userData.role==='customer'){\r\n            console.log(typeof(result.body));\r\n            \r\n          this.route.navigate(['cartListing']);\r\n          localStorage.setItem('customer',result.body[0]);\r\n          }else{\r\n            this.route.navigate(['admin/adminHome']);\r\n            localStorage.setItem('admin',JSON.stringify(result.body));\r\n          }\r\n          this.isUserSignUp.next(true);\r\n        }\r\n        else{\r\n          console.log('Unable to Fetch Data');\r\n\r\n          this.isUserLoggedIn.emit(true);\r\n          \r\n        }\r\n        \r\n    })\r\n    // console.log(data.loginPassword);\r\n    // console.log(data);\r\n  }\r\n\r\n\r\n}\r\n"],"mappings":"AAAA,SAASA,YAAY,QAAoB,eAAe;AAKxD,SAASC,eAAe,QAAQ,MAAM;;;;AAMtC,OAAM,MAAOC,WAAW;EAQtBC,YAAoBC,IAAe,EAAUC,KAAY;IAArC,KAAAD,IAAI,GAAJA,IAAI;IAAqB,KAAAC,KAAK,GAALA,KAAK;IANlD,KAAAC,KAAK,GAAG,0BAA0B;IAElC,KAAAC,YAAY,GAAG,IAAIN,eAAe,CAAU,KAAK,CAAC;IAElD,KAAAO,cAAc,GAAG,IAAIR,YAAY,CAAU,KAAK,CAAC;IAiB/C,KAAAS,QAAQ,GAAK,EAAE;EAf4C;EAE7DC,UAAUA,CAACC,IAAQ;IACjB,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAC,6BAA6B,EAACD,IAAI,CAAC,CAACE,SAAS,CAAEC,MAAU,IAAG;MACzE,IAAGA,MAAM,EAAC;QACR,IAAI,CAACP,YAAY,CAACQ,IAAI,CAAC,IAAI,CAAC;QAC5B,IAAI,CAACV,KAAK,CAACW,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;QACzBC,YAAY,CAACC,OAAO,CAAC,UAAU,EAACC,IAAI,CAACC,SAAS,CAACN,MAAM,CAAC,CAAC;OACxD,MAAI;QACJO,KAAK,CAAC,iBAAiB,CAAC;;IAG3B,CAAC,CAAC;EACJ;EAIAC,SAASA,CAACX,IAAQ;IAChB,IAAI,CAACP,IAAI,CAACmB,GAAG,CAAC,qCAAqCZ,IAAI,CAACa,UAAU,gBAAgBb,IAAI,CAACc,aAAa,EAAE,EAAC;MAACC,OAAO,EAAC;IAAU,CAAC,CAAC,CAACb,SAAS,CAAEC,MAAU,IAAG;MACjJ,IAAGA,MAAM,IAAIA,MAAM,CAACa,IAAI,IAAIb,MAAM,CAACa,IAAI,CAACC,MAAM,EAAC;QAC7CC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;QAC3BD,OAAO,CAACC,GAAG,CAAChB,MAAM,CAAC;QAEnB,IAAI,CAACL,QAAQ,GAACK,MAAM,CAACa,IAAI,CAAC,CAAC,CAAC;QAC5BE,OAAO,CAACC,GAAG,CAAC,IAAI,CAACrB,QAAQ,CAAC;QAC1BoB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACrB,QAAQ,CAACsB,IAAI,CAAC;QAC/BF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACrB,QAAQ,CAACuB,SAAS,GAAG,IAAI,CAACvB,QAAQ,CAACwB,QAAQ,CAAC;QAE7D,IAAG,IAAI,CAACxB,QAAQ,CAACsB,IAAI,KAAG,UAAU,EAAC;UACjCF,OAAO,CAACC,GAAG,CAAC,OAAOhB,MAAM,CAACa,IAAK,CAAC;UAElC,IAAI,CAACtB,KAAK,CAACW,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;UACpCC,YAAY,CAACC,OAAO,CAAC,UAAU,EAACJ,MAAM,CAACa,IAAI,CAAC,CAAC,CAAC,CAAC;SAC9C,MAAI;UACH,IAAI,CAACtB,KAAK,CAACW,QAAQ,CAAC,CAAC,iBAAiB,CAAC,CAAC;UACxCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAACC,IAAI,CAACC,SAAS,CAACN,MAAM,CAACa,IAAI,CAAC,CAAC;;QAE3D,IAAI,CAACpB,YAAY,CAACQ,IAAI,CAAC,IAAI,CAAC;OAC7B,MACG;QACFc,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;QAEnC,IAAI,CAACtB,cAAc,CAAC0B,IAAI,CAAC,IAAI,CAAC;;IAIpC,CAAC,CAAC;IACF;IACA;EACF;EAAC,QAAAC,CAAA,G;qBAzDUjC,WAAW,EAAAkC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAXxC,WAAW;IAAAyC,OAAA,EAAXzC,WAAW,CAAA0C,IAAA;IAAAC,UAAA,EAFV;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}